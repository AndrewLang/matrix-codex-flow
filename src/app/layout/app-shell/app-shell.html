<div class="flex min-h-screen text-slate-100">
  <aside
    class="flex shrink-0 flex-col border-r border-slate-800 bg-slate-900/70 p-3 transition-all duration-200"
    [class.w-64]="!isSidebarCollapsed()"
    [class.w-20]="isSidebarCollapsed()"
  >
    <div class="mb-6 flex items-center justify-between">
      <span
        class="text-xs font-semibold uppercase tracking-[0.14em] text-slate-400"
        [class.hidden]="isSidebarCollapsed()"
      >
        CodexFlow
      </span>
      <ui-button type="button" size="sm" (click)="toggleSidebar()">
        {{ isSidebarCollapsed() ? '>' : '<' }}
      </ui-button>
    </div>

    <nav class="flex flex-1 flex-col gap-2">
      @for (item of navItems; track item.path) {
        @if (item.path !== '/settings') {
          <a
            [routerLink]="item.path"
            routerLinkActive="bg-slate-700 text-white"
            [routerLinkActiveOptions]="{ exact: item.path === '/' }"
            class="group relative flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-slate-300 transition hover:bg-slate-800 hover:text-white"
            [class.text-center]="isSidebarCollapsed()"
            [class.justify-center]="isSidebarCollapsed()"
          >
            <i [class]="'bi ' + item.icon + ' text-xl'"></i>
            <span [class.hidden]="isSidebarCollapsed()">{{ item.label }}</span>
            @if (isSidebarCollapsed()) {
              <span
                class="pointer-events-none absolute left-full top-1/2 ml-2 -translate-y-1/2 whitespace-nowrap rounded-md bg-slate-950 px-2 py-1 text-xs text-slate-100 opacity-0 shadow-lg transition group-hover:opacity-100"
              >
                {{ item.label }}
              </span>
            }
          </a>
        }
      }
    </nav>

    <nav class="mt-2 border-t border-slate-800 pt-2">
      @for (item of navItems; track item.path) {
        @if (item.path === '/settings') {
          <a
            [routerLink]="item.path"
            routerLinkActive="bg-slate-700 text-white"
            class="group relative flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-slate-300 transition hover:bg-slate-800 hover:text-white"
            [class.text-center]="isSidebarCollapsed()"
            [class.justify-center]="isSidebarCollapsed()"
          >
            <i [class]="'bi ' + item.icon + ' text-xl'"></i>
            <span [class.hidden]="isSidebarCollapsed()">{{ item.label }}</span>
            @if (isSidebarCollapsed()) {
              <span
                class="pointer-events-none absolute left-full top-1/2 ml-2 -translate-y-1/2 whitespace-nowrap rounded-md bg-slate-950 px-2 py-1 text-xs text-slate-100 opacity-0 shadow-lg transition group-hover:opacity-100"
              >
                {{ item.label }}
              </span>
            }
          </a>
        }
      }
    </nav>
  </aside>

  <main class="min-w-0 flex-1 p-6">
    <router-outlet />
  </main>
</div>
