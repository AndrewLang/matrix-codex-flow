<div class="mt-3 space-y-3">
    <input #stepTitleInput
        class="w-full rounded bg-slate-900/70 px-3 py-2 text-sm text-slate-100 outline-none placeholder:text-slate-500"
        type="text" [value]="title()" placeholder="Step title" (input)="title.set(stepTitleInput.value)" />

    <mtx-md-editor [value]="content()" [enabled]="!isGenerating()" placeholder="Step content (markdown supported)"
        (valueChange)="content.set($event)">
    </mtx-md-editor>

    <div class="mt-3 flex items-center justify-between">
        <div class="flex items-center gap-2">
            <button type="button"
                class="rounded bg-slate-700 px-3 py-1.5 text-xs text-slate-200 transition hover:bg-slate-600"
                [disabled]="isGenerating()" [class.opacity-70]="isGenerating()"
                [class.cursor-not-allowed]="isGenerating()" (click)="optimizePrompt()" title="Optimize prompt with AI">
                <mtx-icon [icon]="isGenerating() ? 'openai text-emerald-400 icon-spin' : 'openai'"></mtx-icon>
            </button>
        </div>

        <div class="flex items-center gap-2">
            <button type="button"
                class="rounded bg-slate-700 px-3 py-1.5 text-xs text-slate-200 transition hover:bg-slate-600"
                (click)="onCancel()">
                Cancel
            </button>
            <button type="button"
                class="rounded bg-emerald-600 px-3 py-1.5 text-xs text-white transition hover:bg-emerald-500"
                (click)="onSave()">
                Save
            </button>
        </div>
    </div>
</div>