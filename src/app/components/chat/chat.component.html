<div class="flex h-full min-h-0 flex-col gap-6 text-slate-200 p-3">
    <section #transcriptContainer class="flex-1 min-h-0 overflow-y-auto rounded-xl pr-2 py-8 backdrop-blur-xl">
        <div class="space-y-6">
            @for (message of messages(); track message.id) {
            <article class="flex" [ngClass]="bubbleLayout(message)">
                <div class="flex flex-col gap-1.5" [ngClass]="bubbleAlign(message)">
                    <div class="rounded-xl py-2 px-3 text-[15px] leading-7" [ngClass]="bubbleColor(message)">
                        {{ message.content }}
                    </div>
                    <time class="px-2 text-[11px] text-slate-500/90">
                        {{ message.createdAt | formatTimestamp }}
                    </time>
                </div>
            </article>
            }
        </div>
    </section>


    <div class="">
        <div class="rounded-xl bg-slate-900/60 p-3 backdrop-blur-xl shadow-xl">
            <div class="flex flex-col gap-4 space-y-2">
                <textarea #composerTextarea
                    class="w-full resize-none rounded-2xl bg-transparent px-3 py-3 text-[15px]leading-5 text-slate-200 placeholder:text-slate-500/90 focus:outline-none"
                    [value]="composerText()" [style.min-height.px]="minComposerHeightPixels" rows="4"
                    [style.max-height.px]="maxComposerHeightPixels" placeholder="Message VibeFlow"
                    (input)="onComposerInput($event)" (keydown)="onComposerKeydown($event)"></textarea>

                <div class="flex items-center justify-between border-t border-slate-800/80 pt-3">
                    <div>
                        <span class="text-xs text-slate-500/90">GPT-5.3-Codex</span>
                    </div>
                    <button type="button"
                        class="h-9 w-9 place-items-center rounded-full bg-slate-800 text-slate-100 shadow-none transition hover:bg-slate-700"
                        aria-label="Send message" (click)="sendMessage()">
                        <mtx-icon icon="send text"></mtx-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>